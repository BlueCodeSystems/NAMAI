---
name: step1_ultrasound_date
description: Date that the ultrasound was done..
priority: 1
condition: "(global_ultrasound_done_date != '') && (step1_ultrasound_date == '') && (step1_ultrasound == 'done_earlier')"
actions:
- "calculation = global_ultrasound_done_date"
---
name: step1_ultrasound_gest_age_wks
description: GA from ultrasound - weeks
priority: 1
condition: "global_ultrasound_gest_age_wks != '' && step1_ultrasound_gest_age_wks == ''"
actions:
- "calculation = global_ultrasound_gest_age_wks"
---
name: step1_ultrasound_gest_age
description: GA from ultrasound - weeks
priority: 2
condition: "step1_ultrasound_edd != '' "
actions:
- "calculation = helper.getWeeksAndDaysFromDays( 280 - helper.getDifferenceDays(helper.getSecondaryValue(step1_ultrasound_edd)) - 1 )"
---
name: step1_ultrasound_edd
description: EDD calculated from ultrasound results.
priority: 1
condition: "step1_ultrasound_date != '' && step1_ultrasound_gest_age_wks > 0"
actions:
- "calculation = helper.addDuration(helper.getSecondaryValue(step1_ultrasound_date), ( (280 - (step1_ultrasound_gest_age_wks * 7) ) +'d'))"
---
name: step1_select_gest_age_edd
description: Gest age
priority: 1
condition: "global_lmp_gest_age != '' || global_lmp_edd != '' || global_ultrasound_gest_age != '' || global_ultrasound_edd != '' || global_sfh_ga_hidden != '' || global_sfh_edd != ''"
actions:
- "calculation = ['lmp_gest_age': global_lmp_gest_age,'lmp_edd':global_lmp_edd, 'ultrasound_gest_age':step1_ultrasound_gest_age,'ultrasound_edd':step1_ultrasound_edd,'sfh_gest_age':global_sfh_ga_hidden,'sfh_edd':global_sfh_edd]"
---
name: step1_no_of_fetuses
description: No. of fetuses
priority: 1
condition: "global_no_of_fetuses != '' && step1_no_of_fetuses == ''"
actions:
- "calculation = global_no_of_fetuses"
---
name: step1_fetal_presentation
description: Fetal presentation
priority: 1
condition: "global_fetal_presentation != '' && step1_fetal_presentation == ''"
actions:
- "calculation = global_fetal_presentation"
---
name: step1_preeclampsia_risk
description: preeclampsia_risk
priority: 1
condition: "(step1_no_of_fetuses >= 2) || (global_prev_preg_comps.contains('pre_eclampsia_eclampsia') || global_prev_preg_comps.contains('convulsions')) || (global_health_conditions.contains('diabetes') || global_health_conditions.contains('Hypertension') || global_health_conditions.contains('kidney_disease'))"
actions:
- "calculation = 1"
---
name: step1_hiv_positive
description: hiv_positive
priority: 1
condition: "(step1_hiv_test_result == 'positive') || global_health_conditions.contains('hiv') || (global_hiv_positive != '' && global_hiv_positive == 1)"
actions:
- "calculation = 1"
---
name: step2_partner_hiv_positive
description: partner_hiv_positive
priority: 1
condition: "global_partner_hiv_status == 'positive' || step2_hiv_test_partner_result == 'positive'"
actions:
- "calculation = 1"
---
name: step2_hiv_risk
description: hiv_risk
priority: 1
condition: "(helper.getValueFromAccordion('accordion_hiv', 'step1_hiv_positive') != '1' && (step2_partner_hiv_positive == 1 || global_alcohol_substance_use.contains('injectable_drugs') || global_occupation.contains('informal_employment_sex_worker') || global_site_anc_hiv == true) )"
actions:
- "calculation = 1"
---
name: step1_hepb_positive
description: hepb_positive
priority: 1
condition: "(step1_hbsag_lab_ima == 'positive') || (step1_hbsag_rdt == 'positive') || (step1_hbsag_dbs == 'positive')"
actions:
- "calculation = 1"
---
name: step1_hepc_positive
description: hepc_positive
priority: 1
condition: "(step1_hcv_lab_ima != '' && step1_hcv_lab_ima == 'positive') || (step1_hcv_rdt != '' && step1_hcv_rdt == 'positive') || (step1_hcv_dbs != '' && step1_hcv_dbs == 'positive')"
actions:
- "calculation = 1"
---
name: step1_syphilis_positive
description: syphilis_positive
priority: 1
condition: "(step1_rapid_syphilis_test == 'positive' && step1_rapid_syphilis_test != '' ) || (step1_rpr_syphilis_test == 'positive' && step1_rpr_syphilis_test != '') || (step1_lab_syphilis_test == 'positive' && step1_lab_syphilis_test != '')"
actions:
- "calculation = 1"
---
name: step1_gdm_risk
description: gdm_risk
priority: 1
condition: "(global_bmi >= 30) || global_prev_preg_comps.contains('macrosomia') || global_prev_preg_comps.contains('gestational_diabetes') || (step1_urine_glucose == 'none' && !step1_urine_glucose.isEmpty())"
actions:
- "calculation = 1"
---
name: step1_asb_positive
description: asb_positive
priority: 1
condition: "(step1_urine_culture == 'positive_any') || (step1_urine_culture == 'positive_gbs') || step1_urine_gram_stain == 'positive' || (step1_urine_nitrites == 'none'&& !step1_urine_nitrites.isEmpty())|| (step1_urine_leukocytes == 'none'&& !step1_urine_leukocytes.isEmpty())"
actions:
- "calculation = 1"
---
name: step1_gdm
description: gdm
priority: 1
condition: "(step1_fasting_plasma_gluc >= 92 && step1_fasting_plasma_gluc < 126 ) || (step1_ogtt_fasting >= 92 && step1_ogtt_fasting < 126) || (step1_ogtt_1 >= 180 && step1_ogtt_1 < 200 ) || (step1_ogtt_2 >= 153 && step1_ogtt_2 < 200)"
actions:
- "calculation = 1"
---
name: step1_dm_in_preg
description: dm_in_preg
priority: 1
condition: "(step1_fasting_plasma_gluc >= 126) || (step1_ogtt_fasting >= 126) || (step1_ogtt_1 >= 200) || (step1_ogtt_2 >= 200) || (step1_random_plasma >= 200)"
actions:
- "calculation = 1"
---
name: step1_hb_result
description: hb_result
priority: 1
condition: "true"
actions:
- "calculation = step1_hb_test_type != '' && step1_hb_test_type == 'complete_blood_count' ? step1_cbc : step1_hb_test_type != '' && step1_hb_test_type == 'hb_test_colour_scale' ? step1_hb_colour : step1_hb_gmeter"
---
name: step1_anaemic
description: anaemic
priority: 1
condition: "((step1_hb_result != '' && step1_hb_result < 11 && (global_gest_age_openmrs <= 12 || global_gest_age_openmrs >= 28)) || (step1_hb_result != '' && step1_hb_result < 10.5 && (global_gest_age_openmrs > 12 && global_gest_age_openmrs < 28)) || ((step1_hb_result == '' || step1_hb_result == 0) && global_pallor == 'yes'))"
actions:
- "calculation = 1"
---
name: step1_urine_test_date
description: urine_test_date
priority: 1
condition: "step1_urine_test_status == 'done_today'"
actions:
- "calculation = helper.getDateToday()"
---
name: step1_tb_screening_date
description: tb_screening_date
priority: 1
condition: "step1_tb_screening_status == 'done_today'"
actions:
- "calculation = helper.getDateToday()"
---
name: step1_syphilis_test_date
description: syphilis_test_date
priority: 1
condition: "step1_syph_test_status == 'done_today'"
actions:
- "calculation = helper.getDateToday()"
---
name: step2_hiv_test_partner_date
description: hiv_test_partner_date
priority: 1
condition: "step2_hiv_test_partner_status == 'done_today'"
actions:
- "calculation = helper.getDateToday()"
---
name: step2_other_test_date
description: other_test_date
priority: 1
condition: "step2_other_test == 'done_today'"
actions:
- "calculation = helper.getDateToday()"
---
name: step1_hiv_test_date
description: hiv_test_date
priority: 1
condition: "step1_hiv_test_status == 'done_today'"
actions:
- "calculation = helper.getDateToday()"
---
name: step1_hepc_test_date
description: hepc_test_date
priority: 1
condition: "step1_hepc_test_status == 'done_today'"
actions:
- "calculation = helper.getDateToday()"
---
name: step1_hepb_test_date
description: hepb_test_date
priority: 1
condition: "step1_hepb_test_status == 'done_today'"
actions:
- "calculation = helper.getDateToday()"
---
name: step1_blood_type_test_date
description: blood_type_test_date
priority: 1
condition: "step1_blood_type_test_status != '' && step1_blood_type_test_status == 'done_today'"
actions:
- "calculation = helper.getDateToday()"
---
name: step1_glucose_test_date
description: glucose_test_date
priority: 1
condition: "step1_glucose_test_status != '' && step1_glucose_test_status == 'done_today'"
actions:
- "calculation = helper.getDateToday()"
---
name: step1_hb_test_date
description: hb_test_date
priority: 1
condition: "step1_hb_test_status != '' && step1_hb_test_status == 'done_today'"
actions:
- "calculation = helper.getDateToday()"
---
name: step2_ultrasound_date
description: Date that the ultrasound was done..
priority: 1
condition: "global_ultrasound_done_date != ''"
actions:
- "calculation = global_ultrasound_done_date"
---
name: step2_ultrasound_gest_age_wks
description: GA from ultrasound - weeks
priority: 1
condition: "global_ultrasound_gest_age_wks != ''"
actions:
- "calculation = global_ultrasound_gest_age_wks"
---
name: step2_ultrasound_edd
description: EDD calculated from ultrasound results.
priority: 1
condition: "step2_ultrasound_date != '' && step2_ultrasound_gest_age_wks > 0"
actions:
- "calculation = helper.addDuration(helper.getSecondaryValue(step2_ultrasound_date), ( (280 - (step2_ultrasound_gest_age_wks * 7) ) +'d'))"
---
name: step2_select_gest_age_edd
description: Gest age
priority: 1
condition: "global_lmp_gest_age != '' || global_lmp_edd != '' || global_ultrasound_gest_age != '' || global_ultrasound_edd != '' || global_sfh_ga_hidden != '' || global_sfh_edd != ''"
actions:
- "calculation = ['lmp_gest_age': global_lmp_gest_age,'lmp_edd':global_lmp_edd, 'ultrasound_gest_age':global_ultrasound_gest_age,'ultrasound_edd':global_ultrasound_edd,'sfh_gest_age':global_sfh_ga_hidden,'sfh_edd':global_sfh_edd]"

